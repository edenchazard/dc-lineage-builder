import{d as N,o as c,c as p,a as t,A as I,_ as k,r,u as F,$ as W,a1 as C,ao as R,ay as Y,q as B,a3 as P,y as V,P as j,U as f,b as G,f as Z,w as z,F as Q}from"./index-CkVLQWri.js";import{F as H}from"./FeedbackPanel-DWRWo6y_.js";import{L as X}from"./LineageWrapper-D2uaZU0p.js";import{I as J}from"./InputTextbox-10S61aZ7.js";const _="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAwCAYAAAB5R9gVAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF2GlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDggNzkuMTY0MDM2LCAyMDE5LzA4LzEzLTAxOjA2OjU3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjEuMSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIxLTExLTAxVDE4OjA3OjI1WiIgeG1wOk1vZGlmeURhdGU9IjIwMjEtMTEtMDFUMTg6MDg6NTNaIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIxLTExLTAxVDE4OjA4OjUzWiIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowMjFjOTRiNi00ZjAxLTU0NDYtYjEwOC1lZmRjYTk5MjcwMTAiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpjNDZhY2U1ZC0xMDk5LTBmNDMtYjhiOC1mNjUyMzU4NjE1YjEiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxZTQzZjA2Zi1lOTdlLWFjNDItYjk4OS0yZDU0OTI1ZjgyODEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjFlNDNmMDZmLWU5N2UtYWM0Mi1iOTg5LTJkNTQ5MjVmODI4MSIgc3RFdnQ6d2hlbj0iMjAyMS0xMS0wMVQxODowNzoyNVoiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMS4xIChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MDIxYzk0YjYtNGYwMS01NDQ2LWIxMDgtZWZkY2E5OTI3MDEwIiBzdEV2dDp3aGVuPSIyMDIxLTExLTAxVDE4OjA4OjUzWiIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjEgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pp5VlVQAAAIQSURBVFjD7di/TgJBEAbwqzEkFJTQUQANGngBiIk9FITCkBBqGqU1MSHUtDSW1paWVlb4BnY+yHizMpdhmD3ubpeExC0+DxVuf36798/o9vrq6ZIS4RcAiC4hARRAARRAFwsqlUp5AiKZP+sbZACz2SzJcDjMBfMFMgMul0sTjqEMBoNMMB+gBMLDUYihdLvdVJQrKAGs1+uTDREoDeUCOsBQbC0RikA21NlAcmFnbakoyAzE20DMy2oFX9Mp/EwmAKMRQKcD35UKfNTrcN/rHTXUaDSOUE4gjtosFn+IPeQgUWTCUYjxBTL1cxBuTSs4eAx6n8/heTw2eW21EtBbuXzUkEQ5gwj12e8bFCLk+tnEzexiEObUtOUFmR3SIpUo22ImDDbEQdQQR3kDaaF2YA96aLcP2iFUtVotBEoOW37Co4E5graP8TTydjQMhVCFQBIlQYShxbxTjjDeDiU3CHdiA8ng+UfD2NpxBhFK4uh7jqHPaSDC0MLODZIoDYavae1kwTiD+CASR8Fm5FTxteOjIYOindrawtw1m6adbRx8rWG0dgqdh2iH8hDmjSFiK0CyGY7iV/5Clw6O0nD4M4Tc1GrqFGlT5XQtk3+phtPeo2HkfVHh2w++U7k9BbFhnO8Y+QBpQPl7G8bLTb4NpkEFBM7+XKZNV1bIWZ9cU+LvyTX89yOAAiiA/j3okvILeRcI5GeIMxkAAAAASUVORK5CYII=",q={id:"lineage"},K=["innerHTML"],$=N({__name:"OnsitePreview",props:{htmlPreview:{type:String,required:!0}},setup(v){return(m,l)=>(c(),p("ul",q,[t("li",null,[l[0]||(l[0]=t("div",null,[t("span",{class:"border"},[t("img",{src:_,alt:"result placeholder"})]),t("label",null,"Result")],-1)),v.htmlPreview!==""?(c(),p("ul",{key:0,innerHTML:v.htmlPreview},null,8,K)):I("",!0)])]))}}),ee=k($,[["__scopeId","data-v-93aa9341"]]),te={class:"constrain-width content"},ie={class:"content-limit"},ae={id:"onsite-preview-form"},x="onsite-preview-container",y=12,le=N({__name:"OnsitePreview",setup(v){const m=r(""),l=r(""),s=r(""),b=r(0),E=r(!0),n=F("status"),A=r(""),h=W();C(()=>{var i,e;l.value=((i=h.query)==null?void 0:i.male)??"",s.value=((e=h.query)==null?void 0:e.female)??"",l.value&&s.value&&g()});function w(i,e=""){i+=1;const o=" > ul > li".repeat(i),a=`#${x} ${o} ${e}`;return Array.from(document.querySelectorAll(a))}function L(i){return w(i,"> div > a > img")}function O(i){return w(i)}async function g(){var o;if(!n.value)return;n.value.close();const i=l.value,e=s.value;if(!R(i)||!R(e)){n.value.warn("Invalid code. Codes must be 4-5 characters in length and alphanumeric.");return}try{n.value.info({message:"Contacting server...",showDismiss:!1});const a=await Y(i,e,{dpr:window.devicePixelRatio??1});if(a.errors){if(n.value.update(a.errors),a.errors.some(u=>u.type==="error"))return}else n.value.close();const{male:D,female:M}=a;m.value=D.html+M.html,b.value=Math.max(D.gen,M.gen)+1,await B(),L(5).forEach(u=>u.style.width="24px"),E.value&&O(y+1).forEach(u=>{var T;const d=u.parentNode;(T=d==null?void 0:d.parentNode)==null||T.removeChild(d)});const S=window.location.origin,U="/test";A.value=`${S}${U}/onsite-preview?male=${l.value}&female=${s.value}`}catch(a){if(a instanceof P&&((o=a.response)==null?void 0:o.status)===404){n.value.error((await a.response.json()).errors[0].message);return}n.value.error("Sorry, an error has occurred.")}}return(i,e)=>(c(),p(Q,null,[t("div",te,[t("div",ie,[e[5]||(e[5]=t("section",{id:"information"},[t("div",null,[t("h1",null,"Onsite Preview"),t("p",null," This utility allows you to select two dragons and combine both of their lineages to see the result. "),t("p",null," Enter the codes for the male and the female and press preview. Lineage Builder will check the genders of both dragons, although dragons without a gender, such as ungendered hatchlings, will be ignored. ")])],-1)),t("section",ae,[t("form",{id:"form",class:"form",onSubmit:V(g,["prevent"])},[e[2]||(e[2]=t("label",{for:"male",class:"label"},"Male",-1)),j(t("input",{id:"male","onUpdate:modelValue":e[0]||(e[0]=o=>l.value=o),class:"interactive",type:"text",min:"4",max:"5"},null,512),[[f,l.value]]),e[3]||(e[3]=t("label",{for:"female",class:"label"},"Female",-1)),j(t("input",{id:"female","onUpdate:modelValue":e[1]||(e[1]=o=>s.value=o),class:"interactive",type:"text",min:"4",max:"5"},null,512),[[f,s.value]]),e[4]||(e[4]=t("button",{type:"submit",class:"pointer btn"}," Preview ",-1))],32),A.value?(c(),G(J,{key:0,id:"share-link","model-value":A.value,"show-copy-button":"","show-share-button":"",readonly:"","select-all-on-focus":""},null,8,["model-value"])):I("",!0),Z(H,{ref_key:"status",ref:n},null,512)])])]),m.value!==""?(c(),G(X,{key:0,id:x,generations:b.value,"generation-cut-off":y},{default:z(()=>[Z(ee,{"html-preview":m.value},null,8,["html-preview"])]),_:1},8,["generations"])):I("",!0)],64))}}),ue=k(le,[["__scopeId","data-v-1baef19c"]]);export{ue as default};
