import{d as B,r as u,G as w,H as x,o as g,c as f,f as I,t as F,y as k,x as N,a,F as y,au as Z,_ as S,u as h,e as T,Q as L,j as R,P as A,U as O,av as M,O as E,A as j,aw as W,ax as V}from"./index-CkVLQWri.js";import{D as Y}from"./DragonPortrait-D5BSQTBz.js";import{F as C}from"./FeedbackPanel-DWRWo6y_.js";const z=["id"],P=B({__name:"GhostBreedUpload",props:{label:{type:String,required:!0},disabled:{type:Boolean,default:!1}},emits:["tileChosen","uploadError"],setup(m,{expose:r,emit:i}){const o=m,n=i;r({focus:D});const d=u(),b=u(),s=w({...x,image:new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAwCAYAAAB5R9gVAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF2GlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDggNzkuMTY0MDM2LCAyMDE5LzA4LzEzLTAxOjA2OjU3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjEuMSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIxLTExLTAxVDE4OjA3OjI1WiIgeG1wOk1vZGlmeURhdGU9IjIwMjEtMTEtMDFUMTg6MDg6NTNaIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIxLTExLTAxVDE4OjA4OjUzWiIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowMjFjOTRiNi00ZjAxLTU0NDYtYjEwOC1lZmRjYTk5MjcwMTAiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpjNDZhY2U1ZC0xMDk5LTBmNDMtYjhiOC1mNjUyMzU4NjE1YjEiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxZTQzZjA2Zi1lOTdlLWFjNDItYjk4OS0yZDU0OTI1ZjgyODEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjFlNDNmMDZmLWU5N2UtYWM0Mi1iOTg5LTJkNTQ5MjVmODI4MSIgc3RFdnQ6d2hlbj0iMjAyMS0xMS0wMVQxODowNzoyNVoiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMS4xIChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MDIxYzk0YjYtNGYwMS01NDQ2LWIxMDgtZWZkY2E5OTI3MDEwIiBzdEV2dDp3aGVuPSIyMDIxLTExLTAxVDE4OjA4OjUzWiIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjEgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pp5VlVQAAAIQSURBVFjD7di/TgJBEAbwqzEkFJTQUQANGngBiIk9FITCkBBqGqU1MSHUtDSW1paWVlb4BnY+yHizMpdhmD3ubpeExC0+DxVuf36798/o9vrq6ZIS4RcAiC4hARRAARRAFwsqlUp5AiKZP+sbZACz2SzJcDjMBfMFMgMul0sTjqEMBoNMMB+gBMLDUYihdLvdVJQrKAGs1+uTDREoDeUCOsBQbC0RikA21NlAcmFnbakoyAzE20DMy2oFX9Mp/EwmAKMRQKcD35UKfNTrcN/rHTXUaDSOUE4gjtosFn+IPeQgUWTCUYjxBTL1cxBuTSs4eAx6n8/heTw2eW21EtBbuXzUkEQ5gwj12e8bFCLk+tnEzexiEObUtOUFmR3SIpUo22ImDDbEQdQQR3kDaaF2YA96aLcP2iFUtVotBEoOW37Co4E5graP8TTydjQMhVCFQBIlQYShxbxTjjDeDiU3CHdiA8ng+UfD2NpxBhFK4uh7jqHPaSDC0MLODZIoDYavae1kwTiD+CASR8Fm5FTxteOjIYOindrawtw1m6adbRx8rWG0dgqdh2iH8hDmjSFiK0CyGY7iV/5Clw6O0nD4M4Tc1GrqFGlT5XQtk3+phtPeo2HkfVHh2w++U7k9BbFhnO8Y+QBpQPl7G8bLTb4NpkEFBM7+XKZNV1bIWZ9cU+LvyTX89yOAAiiA/j3okvILeRcI5GeIMxkAAAAASUVORK5CYII=",import.meta.url).href,metaData:{src:"ghost",group:"Standard",tags:["Regular"]}});function p(t){const e=t.target;if(e.files instanceof FileList&&e.files[0]){const l=e.files[0];if(l.size<Z.ghostBreedSize){const c=new FileReader;c.addEventListener("load",()=>{if(typeof c.result=="string"){const G=c.result;s.image=G,n("tileChosen",G)}else n("uploadError","File isn't string")}),c.readAsDataURL(l)}else n("uploadError","Incorrect size")}}function v(){o.disabled||d.value!==void 0&&d.value.click()}function D(){var t;o.disabled||(t=b.value)==null||t.$el.focus()}return(t,e)=>(g(),f(y,null,[I(Y,F({ref_key:"tile",ref:b,class:"pointer"},t.$attrs,{data:s,role:"button",tabindex:m.disabled?-1:0,"aria-disabled":m.disabled,onClick:k(v,["prevent"]),onKeyup:N(v,["space","enter"])}),null,16,["data","tabindex","aria-disabled"]),a("input",{id:m.label,ref_key:"fileInput",ref:d,class:"file",type:"file",accept:"image/png, image/gif",tabindex:"-1",onChange:p},null,40,z)],64))}}),U=S(P,[["__scopeId","data-v-84c735da"]]),Q={class:"constrain-width content"},H={class:"content-limit"},X=["pattern"],J={id:"gender-availability"},K={id:"tiles"},q=B({__name:"GhostBreeds",setup(m){const r=u("Ghost Breed"),i=u("b"),o=u(""),n=u(""),d=h("femaleTile"),b=h("maleTile"),s=h("status");function p(t,e){t==="m"?n.value=e:t==="f"&&(o.value=e)}function v(t){s.value&&s.value.error(`Upload error: ${t}.`)}function D(){if(!s.value)return;const t={genderOnly:i.value==="b"?!1:i.value};if(["b","m"].includes(i.value)&&n.value===""){s.value.error("The male tile is missing."),setTimeout(()=>{var l;return(l=b.value)==null?void 0:l.focus()},100);return}else t.male=n.value;if(["b","f"].includes(i.value)&&o.value===""){s.value.error("The female tile is missing."),setTimeout(()=>{var l;return(l=d.value)==null?void 0:l.focus()},100);return}else t.female=o.value;const e={name:r.value,...t,metaData:{group:"*",tags:["Regular"],src:"ghost"}};V(e)?s.value.success(`Ghost breed "${r.value}" has been added.`):s.value.error("There was a problem adding the ghost breed. Please check that the name is valid and isn't already in use.")}return(t,e)=>(g(),f("div",Q,[a("section",H,[e[6]||(e[6]=a("h1",null,"Ghost Breeds",-1)),e[7]||(e[7]=a("p",null,` On this page you can upload custom breeds, aka "ghost breeds", to Lineage Builder. This can be useful if you have breed you've created and want to see what it looks like in lineages. All you have to do is upload the lineage tile and fill in the settings. `,-1)),e[8]||(e[8]=a("p",null,[T(' Ghost breeds will be added under the "Standard" and "Regular" tags and will only be active for the '),a("strong",null,"duration of the session"),T(". As soon as you exit the page they will be automatically deleted! The whole process takes place client-side, they are "),a("strong",null,"not uploaded"),T(" to the server which means it doesn't break DC's artist agreement for sharing unreleased breeds. ")],-1)),a("p",null," Ensure that names are unique and tiles are less than "+L(R(Z).ghostBreedSize/1e3)+"KB. DC lineage tiles are 48Hx36W on lower resolutions and 96Hx72W on higher resolutions. ",1)]),a("form",{id:"form",class:"form",onSubmit:k(D,["prevent"])},[e[14]||(e[14]=a("label",{class:"label",for:"name"},"Breed name",-1)),A(a("input",{id:"name","onUpdate:modelValue":e[0]||(e[0]=l=>r.value=l),type:"text",name:"name",class:"interactive",required:"",title:"Breed name must be alphanumeric and 1-32 characters long.",pattern:R(W).toString().slice(1,-1)},null,8,X),[[O,r.value]]),e[15]||(e[15]=a("span",{class:"label"},"Gender availability",-1)),a("div",J,[A(a("input",{id:"avail_both","onUpdate:modelValue":e[1]||(e[1]=l=>i.value=l),type:"radio",value:"b"},null,512),[[M,i.value]]),e[9]||(e[9]=a("label",{for:"avail_both"},"Both",-1)),A(a("input",{id:"avail_male","onUpdate:modelValue":e[2]||(e[2]=l=>i.value=l),type:"radio",value:"m"},null,512),[[M,i.value]]),e[10]||(e[10]=a("label",{for:"avail_male"},"Male-only",-1)),A(a("input",{id:"avail_female","onUpdate:modelValue":e[3]||(e[3]=l=>i.value=l),type:"radio",value:"f"},null,512),[[M,i.value]]),e[11]||(e[11]=a("label",{for:"avail_female"},"Female-only",-1))]),e[16]||(e[16]=a("span",{class:"label"},"Tiles",-1)),a("div",K,[["b","m"].includes(i.value)?(g(),f(y,{key:0},[I(U,{ref_key:"maleTile",ref:b,label:"male","aria-required":"true",class:E(["select",{invalid:n.value===""}]),onTileChosen:e[4]||(e[4]=l=>p("m",l)),onUploadError:v},null,8,["class"]),e[12]||(e[12]=a("label",{class:"tile-label",for:"male"},"Male ",-1))],64)):j("",!0),["b","f"].includes(i.value)?(g(),f(y,{key:1},[I(U,{ref_key:"femaleTile",ref:d,class:E(["select",{invalid:o.value===""}]),label:"female","aria-required":"true",onTileChosen:e[5]||(e[5]=l=>p("f",l)),onUploadError:v},null,8,["class"]),e[13]||(e[13]=a("label",{class:"tile-label",for:"female"},"Female",-1))],64)):j("",!0)]),e[17]||(e[17]=a("button",{type:"submit",class:"btn pointer"}," Add breed ",-1))],32),I(C,{ref_key:"status",ref:s},null,512)]))}}),ae=S(q,[["__scopeId","data-v-ed4f0d96"]]);export{ae as default};
