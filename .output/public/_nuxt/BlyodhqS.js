import{d as f,x as A,y as u,z as e,Y as p,_ as N,r as s,J as S,o as U,al as F,az as M,aB as W,a2 as B,ao as C,K as T,B as j,$ as Y,ae as R,au as x,C as P,U as V}from"#entry";import{F as z}from"./C-slQGFS.js";import{L as Q}from"./DhFJ7mD2.js";import{I as H}from"./C8Q3_mjy.js";const J="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAwCAYAAAB5R9gVAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF2GlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDggNzkuMTY0MDM2LCAyMDE5LzA4LzEzLTAxOjA2OjU3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjEuMSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIxLTExLTAxVDE4OjA3OjI1WiIgeG1wOk1vZGlmeURhdGU9IjIwMjEtMTEtMDFUMTg6MDg6NTNaIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIxLTExLTAxVDE4OjA4OjUzWiIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowMjFjOTRiNi00ZjAxLTU0NDYtYjEwOC1lZmRjYTk5MjcwMTAiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpjNDZhY2U1ZC0xMDk5LTBmNDMtYjhiOC1mNjUyMzU4NjE1YjEiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxZTQzZjA2Zi1lOTdlLWFjNDItYjk4OS0yZDU0OTI1ZjgyODEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjFlNDNmMDZmLWU5N2UtYWM0Mi1iOTg5LTJkNTQ5MjVmODI4MSIgc3RFdnQ6d2hlbj0iMjAyMS0xMS0wMVQxODowNzoyNVoiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMS4xIChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MDIxYzk0YjYtNGYwMS01NDQ2LWIxMDgtZWZkY2E5OTI3MDEwIiBzdEV2dDp3aGVuPSIyMDIxLTExLTAxVDE4OjA4OjUzWiIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjEgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pp5VlVQAAAIQSURBVFjD7di/TgJBEAbwqzEkFJTQUQANGngBiIk9FITCkBBqGqU1MSHUtDSW1paWVlb4BnY+yHizMpdhmD3ubpeExC0+DxVuf36798/o9vrq6ZIS4RcAiC4hARRAARRAFwsqlUp5AiKZP+sbZACz2SzJcDjMBfMFMgMul0sTjqEMBoNMMB+gBMLDUYihdLvdVJQrKAGs1+uTDREoDeUCOsBQbC0RikA21NlAcmFnbakoyAzE20DMy2oFX9Mp/EwmAKMRQKcD35UKfNTrcN/rHTXUaDSOUE4gjtosFn+IPeQgUWTCUYjxBTL1cxBuTSs4eAx6n8/heTw2eW21EtBbuXzUkEQ5gwj12e8bFCLk+tnEzexiEObUtOUFmR3SIpUo22ImDDbEQdQQR3kDaaF2YA96aLcP2iFUtVotBEoOW37Co4E5graP8TTydjQMhVCFQBIlQYShxbxTjjDeDiU3CHdiA8ng+UfD2NpxBhFK4uh7jqHPaSDC0MLODZIoDYavae1kwTiD+CASR8Fm5FTxteOjIYOindrawtw1m6adbRx8rWG0dgqdh2iH8hDmjSFiK0CyGY7iV/5Clw6O0nD4M4Tc1GrqFGlT5XQtk3+phtPeo2HkfVHh2w++U7k9BbFhnO8Y+QBpQPl7G8bLTb4NpkEFBM7+XKZNV1bIWZ9cU+LvyTX89yOAAiiA/j3okvILeRcI5GeIMxkAAAAASUVORK5CYII=",X={id:"lineage"},_=["innerHTML"],q=f({__name:"OnsitePreview",props:{htmlPreview:{type:String,required:!0}},setup(d){return(c,l)=>(u(),A("ul",X,[e("li",null,[l[0]||(l[0]=e("div",null,[e("span",{class:"border"},[e("img",{src:J,alt:"result placeholder"})]),e("label",null,"Result")],-1)),d.htmlPreview!==""?(u(),A("ul",{key:0,innerHTML:d.htmlPreview},null,8,_)):p("",!0)])]))}}),K=Object.assign(N(q,[["__scopeId","data-v-93aa9341"]]),{__name:"OnsitePreview"}),$={class:"constrain-width content"},ee={class:"content-limit"},te={id:"onsite-preview-form"},G="onsite-preview-container",Z=12,ie=f({__name:"OnsitePreview",setup(d){const c=s(""),l=s(""),o=s(""),I=s(0),y=s(!0),n=S("status"),v=s(""),b=F();U(()=>{l.value=b.query?.male??"",o.value=b.query?.female??"",l.value&&o.value&&g()});function h(a,t=""){a+=1;const i=" > ul > li".repeat(a),m=`#${G} ${i} ${t}`;return Array.from(document.querySelectorAll(m))}function O(a){return h(a,"> div > a > img")}function k(a){return h(a)}async function g(){if(!n.value)return;n.value.close();const a=l.value,t=o.value;if(!M(a)||!M(t)){n.value.warn("Invalid code. Codes must be 4-5 characters in length and alphanumeric.");return}try{n.value.info({message:"Contacting server...",showDismiss:!1});const i=await W(a,t,{dpr:window.devicePixelRatio??1});if(i.errors){if(n.value.update(i.errors),i.errors.some(r=>r.type==="error"))return}else n.value.close();const{male:m,female:w}=i;c.value=m.html+w.html,I.value=Math.max(m.gen,w.gen)+1,await B(),O(5).forEach(r=>r.style.width="24px"),y.value&&k(Z+1).forEach(r=>{const D=r.parentNode;D?.parentNode?.removeChild(D)});const E=window.location.origin,L="./";v.value=`${E}${L}/onsite-preview?male=${l.value}&female=${o.value}`}catch(i){if(i instanceof C&&i.response?.status===404){n.value.error((await i.response.json()).errors[0].message);return}n.value.error("Sorry, an error has occurred.")}}return(a,t)=>(u(),A(V,null,[e("div",$,[e("div",ee,[t[5]||(t[5]=e("section",{id:"information"},[e("div",null,[e("h1",null,"Onsite Preview"),e("p",null," This utility allows you to select two dragons and combine both of their lineages to see the result. "),e("p",null," Enter the codes for the male and the female and press preview. Lineage Builder will check the genders of both dragons, although dragons without a gender, such as ungendered hatchlings, will be ignored. ")])],-1)),e("section",te,[e("form",{id:"form",class:"form",onSubmit:Y(g,["prevent"])},[t[2]||(t[2]=e("label",{for:"male",class:"label"},"Male",-1)),R(e("input",{id:"male","onUpdate:modelValue":t[0]||(t[0]=i=>l.value=i),class:"interactive",type:"text",min:"4",max:"5"},null,512),[[x,l.value]]),t[3]||(t[3]=e("label",{for:"female",class:"label"},"Female",-1)),R(e("input",{id:"female","onUpdate:modelValue":t[1]||(t[1]=i=>o.value=i),class:"interactive",type:"text",min:"4",max:"5"},null,512),[[x,o.value]]),t[4]||(t[4]=e("button",{type:"submit",class:"pointer btn"}," Preview ",-1))],32),v.value?(u(),T(H,{key:0,id:"share-link","model-value":v.value,"show-copy-button":"","show-share-button":"",readonly:"","select-all-on-focus":""},null,8,["model-value"])):p("",!0),j(z,{ref_key:"status",ref:n},null,512)])])]),c.value!==""?(u(),T(Q,{key:0,id:G,generations:I.value,"generation-cut-off":Z},{default:P(()=>[j(K,{"html-preview":c.value},null,8,["html-preview"])]),_:1},8,["generations"])):p("",!0)],64))}}),se=N(ie,[["__scopeId","data-v-392de97e"]]);export{se as default};
