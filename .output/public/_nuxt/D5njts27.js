import{d as I,J as x,r as v,k as P,P as T,x as n,z as e,Y as h,D as p,B as c,$ as V,O as $,U as d,ac as m,g as B,y as o,az as y,K as D,A as i,aA as E,ao as N,_ as F}from"#entry";import{F as j}from"./C-slQGFS.js";import{I as S}from"./C8Q3_mjy.js";const z={class:"constrain-width content"},A={class:"content-limit"},L={id:"information"},R={id:"dragons-to-check-form"},U=["disabled"],J={id:"preview"},K={class:"preview"},M=["href"],O=["src","onError"],W=["onClick"],Y={key:0,id:"results"},q={class:"checks"},G=["id"],H={class:"dragon"},Q=["href"],X=["src"],Z={class:"code"},ee={class:"result"},se={key:0,class:"warn"},te={key:1},oe={class:"conflicts"},ne=["href"],le=["src"],re={class:"code"},ae={class:"conflicts"},ie=["href"],ce=["src"],de={class:"code"},ue={class:"code"},pe={class:"conflict-list"},he=["onClick"],me=I({__name:"InbredChecker",setup(ge){const u=x("status"),f=v(""),_=v([]),b=v([]),g=P(()=>{try{return f.value.split(`
`).map(l=>l.trim()).filter(l=>!!l)}catch{return[]}});T(g,()=>{_.value=[]});async function C(){if(u.value)try{const l=await E(g.value.filter(y));if(l.errors){if(u.value.update(l.errors),l.errors.some(s=>s.type==="error"))return}else u.value.close();b.value=l.checks.sort((s,a)=>s.problems.length+s.selfProblems.length-(a.problems.length+a.selfProblems.length)).reverse()}catch(l){if(l instanceof N&&l.response?.status===404){u.value.error((await l.response.json()).errors[0].message);return}u.value.error("Sorry, an error has occurred.")}}function w(l){const s=document.getElementById(`dragon-${l}`);s&&s.scrollIntoView({behavior:"smooth"})}return(l,s)=>{const a=B("font-awesome-icon");return o(),n("div",z,[e("div",A,[e("section",L,[e("div",null,[s[4]||(s[4]=e("h1",null,"Inbred Checker",-1)),s[5]||(s[5]=e("p",null," This utility lets you compare the ancestry of multiple dragons to see whether the results would be inbred. ",-1)),s[6]||(s[6]=e("p",null," The inbred checker will only look at the first 12 generations for each dragon, so ancestry beyond that will not be assessed. ",-1)),e("p",null,[s[2]||(s[2]=p(" Put each code on a new line. Dragons with a ",-1)),c(a,{class:"icon",icon:"times"}),s[3]||(s[3]=p(" above their code are invalid. ",-1))])])]),e("section",R,[e("form",{id:"form",class:"form",onSubmit:s[1]||(s[1]=V(t=>C(),["prevent"]))},[s[7]||(s[7]=e("label",{for:"input",class:"label"},"Dragons to check",-1)),c(S,{id:"input",modelValue:f.value,"onUpdate:modelValue":s[0]||(s[0]=t=>f.value=t),type:"textarea",autocomplete:"off",spellcheck:"false",rows:"10"},null,8,["modelValue"]),e("button",{type:"submit",class:"pointer btn",disabled:g.value.filter($(y)).length===0}," Check ",8,U)],32),c(j,{ref_key:"status",ref:u},null,512)]),e("section",J,[s[8]||(s[8]=e("h2",null,"Preview",-1)),e("ul",null,[(o(!0),n(d,null,m(g.value,t=>(o(),n("li",{key:t},[e("span",K,[$(y)(t)&&!_.value.includes(t)?(o(),n("a",{key:0,href:`https://dragcave.net/lineage/${t}`,target:"_blank",class:"portrait"},[e("img",{class:"picture",src:`https://dragcave.net/image/${t}/1.png`,onError:r=>_.value.push(t)},null,40,O)],8,M)):(o(),D(a,{key:1,class:"icon",icon:"times"}))]),e("span",null,[e("button",{type:"button",class:"code-jump",onClick:r=>w(t)}," ("+i(t)+") ",9,W)])]))),128))])]),b.value.length>0?(o(),n("section",Y,[s[13]||(s[13]=e("h2",null,"Results",-1)),e("ul",q,[(o(!0),n(d,null,m(b.value,t=>(o(),n("li",{id:`dragon-${t.code}`,key:t.code,class:"check"},[e("div",H,[e("a",{href:`https://dragcave.net/lineage/${t.code}`,target:"_blank",class:"portrait"},[e("img",{class:"picture",src:`https://dragcave.net/image/${t.code}/1.png`},null,8,X)],8,Q),e("span",null,i(t.name),1),e("span",Z,"("+i(t.code)+")",1)]),e("div",ee,[t.failed>0?(o(),n("p",se,[c(a,{class:"icon",icon:"exclamation-triangle"}),p(" "+i(t.failed)+" dragons couldn't be checked. This is usually because the owner has blocked Lineage Builder. Checks will be unreliable and a manual check should be performed. ",1)])):h("",!0),t.problems.length===0&&t.selfProblems.length===0?(o(),n("p",te,[c(a,{class:"icon",icon:"check"}),s[9]||(s[9]=p(" No problems detected. It isn't inbred, and breeding this dragon to any of the other dragons on your list will not produce inbred offspring. ",-1))])):h("",!0),t.selfProblems.length>0?(o(),n(d,{key:2},[e("p",null,[c(a,{class:"icon",icon:"times"}),s[10]||(s[10]=p(" The following dragons directly appear in the dragon's own lineage multiple times. ",-1))]),e("ul",oe,[(o(!0),n(d,null,m(t.selfProblems,r=>(o(),n("li",{key:r.code},[e("a",{href:`https://dragcave.net/lineage/${r.code}`,target:"_blank",class:"portrait"},[e("img",{class:"picture",src:`https://dragcave.net/image/${r.code}/1.png`},null,8,le)],8,ne),e("span",null,i(r.name),1),e("span",re,"("+i(r.code)+")",1)]))),128))])],64)):h("",!0),t.problems.length>0?(o(),n(d,{key:3},[e("p",null,[c(a,{class:"icon",icon:"times"}),s[11]||(s[11]=p(" When bred with certain dragons on your list, the following dragons would appear multiple times. ",-1))]),e("ul",ae,[(o(!0),n(d,null,m(t.problems,r=>(o(),n("li",{key:r.code},[e("a",{href:`https://dragcave.net/lineage/${r.code}`,target:"_blank",class:"portrait"},[e("img",{class:"picture",src:`https://dragcave.net/image/${r.code}/1.png`},null,8,ce)],8,ie),e("span",null,i(r.name),1),e("span",de,"("+i(r.code)+")",1),e("span",ue,[s[12]||(s[12]=e("abbr",{class:"conflict",title:"conflicts with"},"c/w. ",-1)),e("span",pe,[(o(!0),n(d,null,m(r.conflicts,k=>(o(),n("button",{key:`${r.code}-${k}`,type:"button",class:"code-jump",onClick:fe=>w(k)}," ("+i(k)+") ",9,he))),128))])])]))),128))])],64)):h("",!0)])],8,G))),128))])])):h("",!0)])])}}}),ve=F(me,[["__scopeId","data-v-93acfdfc"]]);export{ve as default};
